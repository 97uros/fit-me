<div *ngIf="showModal" class="fixed inset-0 z-50 flex items-center justify-center">
  <!-- Overlay Background -->
  <div class="fixed inset-0 bg-black opacity-70 z-40" (click)="closeModal()"></div>

  <!-- Modal Content -->
  <div class="bg-gray-800 text-white rounded-xl shadow-lg p-8 relative max-w-4xl w-full z-50">
    <button (click)="closeModal()" class="absolute top-4 right-4 text-white text-2xl hover:text-green-600 transition duration-200">
      <i class="fa-solid fa-x"></i>
    </button>
    <h2 class="text-2xl font-bold mb-4">{{ selectedExercise.name }}</h2>
    <p class="font-semibold mb-4">{{ selectedExercise.instructions }}</p>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="text">
        <table class="min-w-full divide-y divide-gray-700 border-1 border-gray-700 rounded-xl">
          <tbody class="bg-gray-800 divide-y divide-gray-700">
            <tr>
              <td class="py-2 text-gray-400">Category:</td>
              <td class="py-2 capitalize"><strong>{{ selectedExercise.category }}</strong></td>
            </tr>
            <tr>
              <td class="py-2 text-gray-400">Force:</td>
              <td class="py-2 capitalize"><strong>{{ selectedExercise.force }}</strong></td>
            </tr>
            <tr>
              <td class="py-2 text-gray-400">Level:</td>
              <td class="py-2 capitalize"><strong>{{ selectedExercise.level }}</strong></td>
            </tr>
            <tr>
              <td class="py-2 text-gray-400">Mechanic:</td>
              <td class="py-2 capitalize"><strong>{{ selectedExercise.mechanic }}</strong></td>
            </tr>
            <tr>
              <td class="py-2 text-gray-400">Equipment:</td>
              <td class="py-2 capitalize"><strong>{{ selectedExercise.equipment }}</strong></td>
            </tr>
            <tr>
              <td class="py-2 text-gray-400">Primary Muscles:</td>
              <td class="py-2 capitalize"><strong>{{ selectedExercise.primaryMuscles.join(', ') }}</strong></td>
            </tr>
            <tr *ngIf="selectedExercise.secondaryMuscles.length > 0" >
              <td class="py-2 text-gray-400">Secondary Muscles:</td>
              <td class="py-2 capitalize"><strong>{{ selectedExercise.secondaryMuscles.join(', ') }}</strong></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="img relative">
        <img [src]="'https://raw.githubusercontent.com/yuhonas/free-exercise-db/main/exercises/' + selectedExercise.images[modalImageIndex]"
          alt="{{ selectedExercise.name }}"
          [ngClass]="{'opacity-0 transition-opacity duration-500 ease-in-out': !showModal, 'opacity-100 transition-opacity duration-500 ease-in-out': showModal}"
          class="rounded-xl shadow-lg w-full h-auto grayscale">
      </div>
    </div>
  </div>
</div>
